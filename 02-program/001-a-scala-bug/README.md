## 发现 Scala 的一个 bug

### 一个 bug

在了解完整个语言的基本语法后，开始通读 List 类的所有 API 接口，通过命令行边敲边学习，在使用 indexof 这个接口时，我发现如果给的下标是负数，则会返回随机的值，而不是报错。  

```scala
scala> List(1,3,5,8).indexOf(8,-2)
res393: Int = 1

scala> List(1,3,5,8).indexOf(8,-3)
res391: Int = 0
```

随后在 StackOverflow 社区提问这个[问题](https://stackoverflow.com/questions/41395111/scala-list-indexof-has-bug)，很快有人作答（应该是 Scala 社区的一个贡献者）说这是一个 bug，并且一并提交了新的修复[合并](https://github.com/scala/scala/pull/5621/files/a75e4a7fafef9ce619a8d0f0622333d20502e7c8)，从修改来看很简单，就是查找前，把下标和 0 取最大值。  

刚刚安装最新的版本，再使用相同的命令，已经可以返回正确的结果。

```scala
scala> List(1,3,5,8).indexOf(8,-2)
res0: Int = 3
```

整个过程唯一的遗憾，就是当时对 scala 源码不熟，不然自己可以提一个合并，贡献者列表里也有我的名字了 ;-)。

### 关于 scala 语言

说实话，我其实挺喜欢 scala 语言的，但平时项目用不着，学习后没过多久也忘了，但是它相对比 Java 的很多优秀的思想，对刚刚接触的我还是相当震撼的。   

Scala 语言有很多优秀的基因，但无奈 Java 的先发优势太大了，马太效应，已经足够多的还要给他更多，让他富余，本来不足的，连剩下的也一并夺走。   

一门语言想要流行起来，良好的社区氛围、工业化的标准以及杀手级应用缺一不可，在杀手级应用这一块貌似只有 Spark，相对来说就弱一些了，加上 scala 自身的学习曲线和一些晦涩的语法，我认为也是导致它难以推广的原因。